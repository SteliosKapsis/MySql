#ΕΡΓΑΣΙΑ 10η

DROP DATABASE IF EXISTS new_personel;

CREATE DATABASE new_personel;

USE new_personel;

CREATE TABLE DEPT(DEPTNO INT(2) NOT NULL, DNAME VARCHAR(15),
    PRIMARY KEY(DEPTNO));

CREATE TABLE JOB(JOBNO INT(3) NOT NULL, JOB VARCHAR(15),
    SAL FLOAT(7,2), PRIMARY KEY(JOBNO));

CREATE TABLE EMP(EMPNO INT(4) NOT NULL,ENAME VARCHAR(10),
    JOBCODE INT(3), DEPTNO INT(2), 
    PRIMARY KEY(EMPNO), FOREIGN KEY(DEPTNO) REFERENCES DEPT(DEPTNO));

INSERT INTO DEPT
        VALUES (10, 'ACCOUNTING'),(20, 'SALES'),(30, 'PERSONNEL');

INSERT INTO EMP
	VALUES (1000, 'SMITH', 100, 10),(2000, 'TOM', 200, 10),
	(300, 'JIM', 100, 20),(400, 'BOB', 200, 20);

INSERT INTO JOB
	VALUES (100,'DBA',2500), (200,'ANALYST',2000);

ALTER TABLE EMP ADD FOREIGN KEY (JOBCODE) REFERENCES JOB(JOBNO);


SHOW TABLES;

DESCRIBE DEPT;

DESCRIBE EMP;

DESCRIBE JOB;

SELECT*FROM DEPT;

SELECT*FROM JOB;

SELECT*FROM EMP;

#1
SELECT*
	FROM EMP,DEPT,JOB
	WHERE EMP.DEPTNO=DEPT.DEPTNO AND EMP.JOBCODE=JOB.JOBNO
	ORDER BY JOB,ENAME;

#2
SELECT*
	FROM EMP,DEPT,JOB
	WHERE EMP.DEPTNO=DEPT.DEPTNO AND EMP.JOBCODE=JOB.JOBNO AND
	DNAME NOT IN ('PERSONNEL')
	ORDER BY JOB,ENAME;

#3
SELECT DNAME "TMHMATA",COUNT(*) "ΠΛΗΘΟΣ" FROM DEPT
	HAVING COUNT(*) >= 2;

#4
SELECT EMP.ENAME "ONOMA ΥΠΑΛΛΗΛΟΥ", DEPT.DNAME "ONOMA TMHMATOΣ", JOB.SAL "ΜΙΣΘΟΣ" 
FROM ((EMP JOIN DEPT ON EMP.DEPTNO = DEPT.DEPTNO)
	JOIN JOB ON EMP.JOBCODE = JOB.JOBNO)	
	WHERE ENAME LIKE '_O%' OR JOB = 'ANALYST';

#5
SELECT ENAME "ONOMA ΥΠΑΛΛΗΛΟΥ", SAL "ΜΙΣΘΟΣ" FROM EMP,JOB
	WHERE SAL = 2500 AND ENAME NOT IN ('SMITH');



#ΤΕΛΟΣ ΕΡΓΑΣΙΑΣ 10

	

